import time
import sys
import threading
from playsound import playsound

# Fungsi untuk mengetik per huruf dengan efek lambat (sedikit dipercepat)
def ketik(teks, delay=0.06):
    for huruf in teks:
        sys.stdout.write(huruf)
        sys.stdout.flush()
        time.sleep(delay)
    print()

# Fungsi untuk mengetik cepat (untuk prompt dan respon cepat)
def ketik_cepat(teks):
    print(teks)

# Fungsi untuk memutar backsound
def mainkan_backsound():
    try:
        playsound("abadi.mp3")
    except:
        ketik_cepat("⚠️ Gagal memutar backsound. Pastikan file 'abadi.mp3' ada.")

# Fungsi puisi cinta
def puisi_cinta():
    time.sleep(0.8)
    ketik("\n🌹 Aku ingin mencintaimu dengan sederhana...")
    time.sleep(2)
    ketik("Dengan kata yang tak sempat diucapkan kayu kepada api yang menjadikannya abu.")
    time.sleep(2)
    print()
    ketik("Aku ingin mencintaimu dengan sederhana...")
    time.sleep(1)
    ketik("Dengan isyarat yang tak sempat disampaikan awan kepada hujan yang menjadikannya tiada.")
    time.sleep(3)
    ketik("\n~ Balqis Duha Rahma\n")

# Fungsi utama
def mulai():
    ketik("Selamat datang di Puisi Cinta dari anak Teknik kiww ✨", delay=0.05)
    ketik("Ketik 'mulai' untuk membaca puisi atau 'keluar' untuk menutup program.", delay=0.045)

    while True:
        pilihan = input("\n>> ").strip().lower()
        if pilihan == 'mulai':
            threading.Thread(target=mainkan_backsound, daemon=True).start()
            puisi_cinta()
        elif pilihan == 'keluar':
            ketik_cepat("Terima kasih telah menikmati bait-bait cinta sederhana ini 🌧️")
            break
        else:
            ketik_cepat("Pilihan tidak dikenal. Ketik 'mulai' atau 'keluar'.")

# Jalankan program
if __name__ == "__main__":
    mulai()
